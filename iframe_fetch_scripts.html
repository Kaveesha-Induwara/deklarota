<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<title>iframe</title>
	<style type="text/css" media="screen">
		body{margin:0;padding:0;overflow:hidden;-apple-dashboard-region: dashboard-region(control rectangle 0 0 0 0);}
	</style>
	<script type="text/javascript" charset="utf-8">
	if  (navigator.userAgent.match(/Opera/)){
		log = function(){
			opera.postError.apply(opera, arguments)
		}
	} else {
		log = alert
	}
	</script>
	<script type="text/javascript">
	
	if (typeof console != 'object'){
		console = {};
		console.log = function(text){
			log(text)
		}	
	}
	</script>
	<script type="text/javascript" charset="utf-8">
	script_data = '';
	
	create_script = function(scripts_data){
		var _script = document.createElement('script');
			_script.setAttribute('type', 'text/javascript');
			
			var script_itlseft = document.createTextNode(scripts_data)
			_script.appendChild(script_itlseft)
			
			
		document.documentElement.firstChild.appendChild(_script);
	}
	append_data_as_script_listener = function(e){
		if (e.data.match(/^append_data_as_script\n/)){
			create_script(e.data.replace(/^append_data_as_script\n/, ''))
			
			window.removeEventListener("message", append_data_as_script_listener, false);
			
		}
	}
	load_test_listener = function(e){
		if (e.data.match(/test_iframe_loading_state/)){
			iframe_source = e.source
			iframe_source.postMessage("iframe_loaded",'*');
			window.removeEventListener("message", load_test_listener, false);
			
			
			window.addEventListener("message", append_data_as_script_listener, false);
			
		}
		
	}
	
	window.addEventListener("message", load_test_listener, false);
	
	
	</script>

</head>

<body>
<div id="player-holder"></div>
</body>
</html>
