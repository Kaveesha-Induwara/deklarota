(function(a){function e(b,d,e){function bX(a){return function(b){if(!this._t||!this._t._a){if(this._t&&this._t.sID){g._wD(j+"ignoring "+b.type+": "+this._t.sID)}else{g._wD(j+"ignoring "+b.type)}return null}else{return a.call(this,b)}}}this.flashVersion=8;this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashPollingInterval=null;this.flashLoadTimeout=1e3;this.wmode=null;this.allowScriptAccess="always";this.useFlashBlock=false;this.useHTML5Audio=true;this.html5Test=/^(probably|maybe)$/i;this.preferFlash=true;this.noSWFCache=false;if(e&&e===Object(e)){c(this,e,false,["allowScriptAccess","altURL","consoleOnly","debugFlash","debugMode","defaultOptions","flash9Options","features","flashLoadTimeout","flashVersion","movieStarOptions","url","useConsole","useFastPolling","flashPollingInterval","useFlashBlock","useHighPerformance","useHTML5Audio","useMovieStar","wmode","waitForWindowLoad"])}this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.movieID="sm2-container";this.id=d||"sm2movie";this.swfCSS={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20111030";this.version=null;this.movieURL=null;this.url=b||null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.specialWmodeCase=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=function(){try{return typeof Audio!=="undefined"&&typeof (new Audio).canPlayType!=="undefined"}catch(a){return false}}();this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var f,g=this,h="soundManager",i=h+"::",j="HTML5::",k,l=navigator.userAgent,m=a,n=m.location.href.toString(),o=document,p,q,r,s=[],t=true,u,v=false,w=false,x=false,y=false,z=false,A,B=0,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=["log","info","warn","error"],V=8,W,X,Y,Z=null,$=null,_,ba,bb,bc,bd,be,bf,bg,bh=false,bi=false,bj,bk,bl,bm,bn=null,bo,bp,bq,br,bs,bt,bu,bv,bw=Array.prototype.slice,bx=false,by,bz,bA,bB,bC,bD=l.match(/(ipad|iphone|ipod)/i),bE=l.match(/firefox/i),bF=l.match(/droid/i),bG=l.match(/msie/i),bH=l.match(/webkit/i),bI=l.match(/safari/i)&&!l.match(/chrome/i),bJ=l.match(/opera/i),bK=l.match(/(mobile|pre\/|xoom)/i)||bD,bL=!n.match(/usehtml5audio/i)&&!n.match(/sm2\-ignorebadua/i)&&bI&&l.match(/OS X 10_6_([3-7])/i),bM=typeof console!=="undefined"&&typeof console.log!=="undefined",bN=typeof o.hasFocus!=="undefined"?o.hasFocus():null,bO=bI&&typeof o.hasFocus==="undefined",bP=!bO,bQ=/(mp3|mp4|mpa)/i,bR="about:blank",bS=o.location?o.location.protocol.match(/http/i):null,bT=!bS?"http:/"+"/":"",bU=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,bV=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],bW=new RegExp("\\.("+bV.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!bS;this._global_a=null;if(bK){g.useHTML5Audio=true;g.preferFlash=false;if(bD){g.ignoreFlash=true;bx=true}}this.ok=function(){return bn?x&&!y:g.useHTML5Audio&&g.hasHTML5};this.supported=this.ok;this.getMovie=function(a){return k(a)||o[a]||m[a]};this.createSound=function(a){function i(){c=bd(c);g.sounds[e.id]=new f(e);g.soundIDs.push(e.id);return g.sounds[e.id]}var b=h+".createSound(): ",c=null,d=null,e=null;if(!x||!g.ok()){bf(b+_(!x?"notReady":"notOK"));return false}if(arguments.length===2){a={id:arguments[0],url:arguments[1]}}c=D(a);e=c;if(e.id.toString().charAt(0).match(/^[0-9]$/)){g._wD(b+_("badID",e.id),2)}g._wD(b+e.id+" ("+e.url+")",1);if(bg(e.id,true)){g._wD(b+e.id+" exists",1);return g.sounds[e.id]}if(bp(e)){d=i();g._wD("Loading sound "+e.id+" via HTML5");d._setup_html5(e)}else{if(r>8){if(e.isMovieStar===null){e.isMovieStar=e.serverURL||(e.type?e.type.match(bU):false)||e.url.match(bW)}if(e.isMovieStar){g._wD(b+"using MovieStar handling")}if(e.isMovieStar){if(e.usePeakData){A("noPeak");e.usePeakData=false}if(e.loops>1){A("noNSLoop")}}}e=be(e,b);d=i();if(r===8){g.o._createSound(e.id,e.loops||1,e.usePolicyFile)}else{g.o._createSound(e.id,e.url,e.usePeakData,e.useWaveformData,e.useEQData,e.isMovieStar,e.isMovieStar?e.bufferTime:false,e.loops||1,e.serverURL,e.duration||null,e.autoPlay,true,e.autoLoad,e.usePolicyFile);if(!e.serverURL){d.connected=true;if(e.onconnect){e.onconnect.apply(d)}}}if(!e.serverURL&&(e.autoLoad||e.autoPlay)){d.load(e)}}if(!e.serverURL&&e.autoPlay){d.play()}return d};this.destroySound=function(a,b){if(!bg(a)){return false}var c=g.sounds[a],d;c._iO={};c.stop();c.unload();for(d=0;d<g.soundIDs.length;d++){if(g.soundIDs[d]===a){g.soundIDs.splice(d,1);break}}if(!b){c.destruct(true)}c=null;delete g.sounds[a];return true};this.load=function(a,b){if(!bg(a)){return false}return g.sounds[a].load(b)};this.unload=function(a){if(!bg(a)){return false}return g.sounds[a].unload()};this.onposition=function(a,b,c,d){if(!bg(a)){return false}return g.sounds[a].onposition(b,c,d)};this.play=function(a,b){var c=h+".play(): ";if(!x||!g.ok()){bf(c+_(!x?"notReady":"notOK"));return false}if(!bg(a)){if(!(b instanceof Object)){b={url:b}}if(b&&b.url){g._wD(c+'attempting to create "'+a+'"',1);b.id=a;return g.createSound(b).play()}else{return false}}return g.sounds[a].play(b)};this.start=this.play;this.setPosition=function(a,b){if(!bg(a)){return false}return g.sounds[a].setPosition(b)};this.stop=function(a){if(!bg(a)){return false}g._wD(h+".stop("+a+")",1);return g.sounds[a].stop()};this.stopAll=function(){var a;g._wD(h+".stopAll()",1);for(a in g.sounds){if(g.sounds.hasOwnProperty(a)){g.sounds[a].stop()}}};this.pause=function(a){if(!bg(a)){return false}return g.sounds[a].pause()};this.pauseAll=function(){var a;for(a=g.soundIDs.length;a--;){g.sounds[g.soundIDs[a]].pause()}};this.resume=function(a){if(!bg(a)){return false}return g.sounds[a].resume()};this.resumeAll=function(){var a;for(a=g.soundIDs.length;a--;){g.sounds[g.soundIDs[a]].resume()}};this.togglePause=function(a){if(!bg(a)){return false}return g.sounds[a].togglePause()};this.setPan=function(a,b){if(!bg(a)){return false}return g.sounds[a].setPan(b)};this.setVolume=function(a,b){if(!bg(a)){return false}return g.sounds[a].setVolume(b)};this.mute=function(a){var b=h+".mute(): ",c=0;if(typeof a!=="string"){a=null}if(!a){g._wD(b+"Muting all sounds");for(c=g.soundIDs.length;c--;){g.sounds[g.soundIDs[c]].mute()}g.muted=true}else{if(!bg(a)){return false}g._wD(b+'Muting "'+a+'"');return g.sounds[a].mute()}return true};this.muteAll=function(){g.mute()};this.unmute=function(a){var b=h+".unmute(): ",c;if(typeof a!=="string"){a=null}if(!a){g._wD(b+"Unmuting all sounds");for(c=g.soundIDs.length;c--;){g.sounds[g.soundIDs[c]].unmute()}g.muted=false}else{if(!bg(a)){return false}g._wD(b+'Unmuting "'+a+'"');return g.sounds[a].unmute()}return true};this.unmuteAll=function(){g.unmute()};this.toggleMute=function(a){if(!bg(a)){return false}return g.sounds[a].toggleMute()};this.getMemoryUse=function(){var a=0;if(g.o&&r!==8){a=parseInt(g.o._getMemoryUse(),10)}return a};this.disable=function(a){var b;if(typeof a==="undefined"){a=false}if(y){return false}y=true;A("shutdown",1);for(b=g.soundIDs.length;b--;){W(g.sounds[g.soundIDs[b]])}C(a);bv.remove(m,"load",G);return true};this.canPlayMIME=function(a){var b;if(g.hasHTML5){b=bq({type:a})}if(!bn||b){return b}else{return a?!!((r>8?a.match(bU):null)||a.match(g.mimePattern)):null}};this.canPlayURL=function(a){var b;if(g.hasHTML5){b=bq({url:a})}if(!bn||b){return b}else{return a?!!a.match(g.filePattern):null}};this.canPlayLink=function(a){if(typeof a.type!=="undefined"&&a.type){if(g.canPlayMIME(a.type)){return true}}return g.canPlayURL(a.href)};this.getSoundById=function(a,b){if(!a){throw new Error(h+".getSoundById(): sID is null/undefined")}var c=g.sounds[a];if(!c&&!b){g._wD('"'+a+'" is an invalid sound ID.',2)}return c};this.onready=function(a,b){var c="onready";if(a&&a instanceof Function){if(x){g._wD(_("queue",c))}if(!b){b=m}E(c,a,b);F();return true}else{throw _("needFunction",c)}};this.ontimeout=function(a,b){var c="ontimeout";if(a&&a instanceof Function){if(x){g._wD(_("queue",c))}if(!b){b=m}E(c,a,b);F({type:c});return true}else{throw _("needFunction",c)}};this._writeDebug=function(a,b,c){var d="soundmanager-debug",e,f,h;if(!g.debugMode){return false}if(typeof c!=="undefined"&&c){a=a+" | "+(new Date).getTime()}if(bM&&g.useConsole){h=U[b];if(typeof console[h]!=="undefined"){console[h](a)}else{console.log(a)}if(g.useConsoleOnly){return true}}try{e=k(d);if(!e){return false}f=o.createElement("div");if(++B%2===0){f.className="sm2-alt"}if(typeof b==="undefined"){b=0}else{b=parseInt(b,10)}f.appendChild(o.createTextNode(a));if(b){if(b>=2){f.style.fontWeight="bold"}if(b===3){f.style.color="#ff3333"}}e.insertBefore(f,e.firstChild)}catch(i){}e=null;return true};this._wD=this._writeDebug;this._debug=function(){var a,b;A("currentObj",1);for(a=0,b=g.soundIDs.length;a<b;a++){g.sounds[g.soundIDs[a]]._debug()}};this.reboot=function(){g._wD(h+".reboot()");if(g.soundIDs.length){g._wD("Destroying "+g.soundIDs.length+" SMSound objects...")}var a,b;for(a=g.soundIDs.length;a--;){g.sounds[g.soundIDs[a]].destruct()}try{if(bG){$=g.o.innerHTML}Z=g.o.parentNode.removeChild(g.o);g._wD("Flash movie removed.")}catch(c){A("badRemove",2)}$=Z=bn=null;g.enabled=O=x=bh=bi=v=w=y=g.swfLoaded=false;g.soundIDs=g.sounds=[];g.o=null;for(a in s){if(s.hasOwnProperty(a)){for(b=s[a].length;b--;){s[a][b].fired=false}}}g._wD(h+": Rebooting...");m.setTimeout(g.beginDelayedInit,20)};this.getMoviePercent=function(){return g.o&&typeof g.o.PercentLoaded!=="undefined"?g.o.PercentLoaded():null};this.beginDelayedInit=function(){z=true;N();setTimeout(function(){if(bi){return false}Q();M();bi=true;return true},20);H()};this.destruct=function(){g._wD(h+".destruct()");g.disable(true)};f=function(a){var b=this,c,d,e;this.sID=a.id;this.url=a.url;this.options=D(a);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.isHTML5=false;this._a=null;this.id3={};this._debug=function(){if(g.debugMode){var a=null,c=[],d,e,f=64;for(a in b.options){if(b.options[a]!==null){if(b.options[a]instanceof Function){d=b.options[a].toString();d=d.replace(/\s\s+/g," ");e=d.indexOf("{");c.push(" "+a+": {"+d.substr(e+1,Math.min(Math.max(d.indexOf("\n")-1,f),f)).replace(/\n/g,"")+"... }")}else{c.push(" "+a+": "+b.options[a])}}}g._wD("SMSound() merged options: {\n"+c.join(", \n")+"\n}")}};this._debug();this.load=function(a){var c=null;if(typeof a!=="undefined"){b._iO=D(a,b.options);b.instanceOptions=b._iO}else{a=b.options;b._iO=a;b.instanceOptions=b._iO;if(b._lastURL&&b._lastURL!==b.url){A("manURL");b._iO.url=b.url;b.url=null}}if(!b._iO.url){b._iO.url=b.url}g._wD("SMSound.load(): "+b._iO.url,1);if(b._iO.url===b.url&&b.readyState!==0&&b.readyState!==2){A("onURL",1);return b}b._lastURL=b.url;b.loaded=false;b.readyState=1;b.playState=0;if(bp(b._iO)){c=b._setup_html5(b._iO);if(!c._called_load){g._wD(j+"load: "+b.sID);b._html5_canplay=false;c.load();c._called_load=true;if(b._iO.autoPlay){b.play()}}else{g._wD(j+"ignoring request to load again: "+b.sID)}}else{try{b.isHTML5=false;b._iO=be(bd(b._iO));if(r===8){g.o._load(b.sID,b._iO.url,b._iO.stream,b._iO.autoPlay,b._iO.whileloading?1:0,b._iO.loops||1,b._iO.usePolicyFile)}else{g.o._load(b.sID,b._iO.url,!!b._iO.stream,!!b._iO.autoPlay,b._iO.loops||1,!!b._iO.autoLoad,b._iO.usePolicyFile)}}catch(d){A("smError",2);u("onload",false);R({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}return b};this.unload=function(){if(b.readyState!==0){g._wD('SMSound.unload(): "'+b.sID+'"');if(!b.isHTML5){if(r===8){g.o._unload(b.sID,bR)}else{g.o._unload(b.sID)}}else{d();if(b._a){b._a.pause();bs(b._a)}}c()}return b};this.destruct=function(a){g._wD('SMSound.destruct(): "'+b.sID+'"');if(!b.isHTML5){b._iO.onfailure=null;g.o._destroySound(b.sID)}else{d();if(b._a){b._a.pause();bs(b._a);if(!bx){b._remove_html5_events()}b._a._t=null;b._a=null}}if(!a){g.destroySound(b.sID,true)}};this.play=function(a,c){var d="SMSound.play(): ",f,h;c=c===undefined?true:c;if(!a){a={}}b._iO=D(a,b._iO);b._iO=D(b._iO,b.options);b.instanceOptions=b._iO;if(b._iO.serverURL&&!b.connected){if(!b.getAutoPlay()){g._wD(d+" Netstream not connected yet - setting autoPlay");b.setAutoPlay(true)}return b}if(bp(b._iO)){b._setup_html5(b._iO);e()}if(b.playState===1&&!b.paused){f=b._iO.multiShot;if(!f){g._wD(d+'"'+b.sID+'" already playing (one-shot)',1);return b}else{g._wD(d+'"'+b.sID+'" already playing (multi-shot)',1)}}if(!b.loaded){if(b.readyState===0){g._wD(d+'Attempting to load "'+b.sID+'"',1);if(!b.isHTML5){b._iO.autoPlay=true}b.load(b._iO)}else if(b.readyState===2){g._wD(d+'Could not load "'+b.sID+'" - exiting',2);return b}else{g._wD(d+'"'+b.sID+'" is loading - attempting to play..',1)}}else{g._wD(d+'"'+b.sID+'"')}if(!b.isHTML5&&r===9&&b.position>0&&b.position===b.duration){g._wD(d+'"'+b.sID+'": Sound at end, resetting to position:0');b._iO.position=0}if(b.paused&&b.position&&b.position>0){g._wD(d+'"'+b.sID+'" is resuming from paused state',1);b.resume()}else{g._wD(d+'"'+b.sID+'" is starting to play');b.playState=1;b.paused=false;if(!b.instanceCount||b._iO.multiShotEvents||!b.isHTML5&&r>8&&!b.getAutoPlay()){b.instanceCount++}b.position=typeof b._iO.position!=="undefined"&&!isNaN(b._iO.position)?b._iO.position:0;if(!b.isHTML5){b._iO=be(bd(b._iO))}if(b._iO.onplay&&c){b._iO.onplay.apply(b);b._onplay_called=true}b.setVolume(b._iO.volume,true);b.setPan(b._iO.pan,true);if(!b.isHTML5){g.o._start(b.sID,b._iO.loops||1,r===9?b._iO.position:b._iO.position/1e3)}else{e();h=b._setup_html5();b.setPosition(b._iO.position);h.play()}}return b};this.start=this.play;this.stop=function(a){if(b.playState===1){b._onbufferchange(0);b.resetOnPosition(0);b.paused=false;if(!b.isHTML5){b.playState=0}if(b._iO.onstop){b._iO.onstop.apply(b)}if(!b.isHTML5){g.o._stop(b.sID,a);if(b._iO.serverURL){b.unload()}}else{if(b._a){b.setPosition(0);b._a.pause();b.playState=0;b._onTimer();d()}}b.instanceCount=0;b._iO={}}return b};this.setAutoPlay=function(a){g._wD("sound "+b.sID+" turned autoplay "+(a?"on":"off"));b._iO.autoPlay=a;if(!b.isHTML5){g.o._setAutoPlay(b.sID,a);if(a){if(!b.instanceCount&&b.readyState===1){b.instanceCount++;g._wD("sound "+b.sID+" incremented instance count to "+b.instanceCount)}}}};this.getAutoPlay=function(){return b._iO.autoPlay};this.setPosition=function(a){if(a===undefined){a=0}var c,d,e,f=b.isHTML5?Math.max(a,0):Math.min(b.duration||b._iO.duration,Math.max(a,0));c=b.position;b.position=f;e=b.position/1e3;b.resetOnPosition(b.position);b._iO.position=f;if(!b.isHTML5){d=r===9?b.position:e;if(b.readyState&&b.readyState!==2){g.o._setPosition(b.sID,d,b.paused||!b.playState)}}else if(b._a){if(b._html5_canplay){if(b._a.currentTime!==e){g._wD("setPosition("+e+"): setting position");try{b._a.currentTime=e;if(b.playState===0||b.paused){b._a.pause()}}catch(h){g._wD("setPosition("+e+"): setting position failed: "+h.message,2)}}}else{g._wD("setPosition("+e+"): delaying, sound not ready")}}if(b.isHTML5){if(b.paused){b._onTimer(true)}}return b};this.pause=function(a){if(b.paused||b.playState===0&&b.readyState!==1){return b}g._wD("SMSound.pause()");b.paused=true;if(!b.isHTML5){if(a||a===undefined){g.o._pause(b.sID)}}else{b._setup_html5().pause();d()}if(b._iO.onpause){b._iO.onpause.apply(b)}return b};this.resume=function(){if(!b.paused){return b}g._wD("SMSound.resume()");b.paused=false;b.playState=1;if(!b.isHTML5){if(b._iO.isMovieStar){b.setPosition(b.position)}g.o._pause(b.sID)}else{b._setup_html5().play();e()}if(!b._onplay_called&&b._iO.onplay){b._iO.onplay.apply(b);b._onplay_called=true}else if(b._iO.onresume){b._iO.onresume.apply(b)}return b};this.togglePause=function(){g._wD("SMSound.togglePause()");if(b.playState===0){b.play({position:r===9&&!b.isHTML5?b.position:b.position/1e3});return b}if(b.paused){b.resume()}else{b.pause()}return b};this.setPan=function(a,c){if(typeof a==="undefined"){a=0}if(typeof c==="undefined"){c=false}if(!b.isHTML5){g.o._setPan(b.sID,a)}b._iO.pan=a;if(!c){b.pan=a;b.options.pan=a}return b};this.setVolume=function(a,c){if(typeof a==="undefined"){a=100}if(typeof c==="undefined"){c=false}if(!b.isHTML5){g.o._setVolume(b.sID,g.muted&&!b.muted||b.muted?0:a)}else if(b._a){b._a.volume=Math.max(0,Math.min(1,a/100))}b._iO.volume=a;if(!c){b.volume=a;b.options.volume=a}return b};this.mute=function(){b.muted=true;if(!b.isHTML5){g.o._setVolume(b.sID,0)}else if(b._a){b._a.muted=true}return b};this.unmute=function(){b.muted=false;var a=typeof b._iO.volume!=="undefined";if(!b.isHTML5){g.o._setVolume(b.sID,a?b._iO.volume:b.options.volume)}else if(b._a){b._a.muted=false}return b};this.toggleMute=function(){return b.muted?b.unmute():b.mute()};this.onposition=function(a,c,d){b._onPositionItems.push({position:a,method:c,scope:typeof d!=="undefined"?d:b,fired:false});return b};this.processOnPosition=function(){var a,c,d=b._onPositionItems.length;if(!d||!b.playState||b._onPositionFired>=d){return false}for(a=d;a--;){c=b._onPositionItems[a];if(!c.fired&&b.position>=c.position){c.fired=true;g._onPositionFired++;c.method.apply(c.scope,[c.position])}}return true};this.resetOnPosition=function(a){var c,d,e=b._onPositionItems.length;if(!e){return false}for(c=e;c--;){d=b._onPositionItems[c];if(d.fired&&a<=d.position){d.fired=false;g._onPositionFired--}}return true};e=function(){if(b.isHTML5){bl(b)}};d=function(){if(b.isHTML5){bm(b)}};c=function(){b._onPositionItems=[];b._onPositionFired=0;b._hasTimer=null;b._onplay_called=false;b._a=null;b._html5_canplay=false;b.bytesLoaded=null;b.bytesTotal=null;b.position=null;b.duration=b._iO&&b._iO.duration?b._iO.duration:null;b.durationEstimate=null;b.failures=0;b.loaded=false;b.playState=0;b.paused=false;b.readyState=0;b.muted=false;b.isBuffering=false;b.instanceOptions={};b.instanceCount=0;b.peakData={left:0,right:0};b.waveformData={left:[],right:[]};b.eqData=[];b.eqData.left=[];b.eqData.right=[]};c();this._onTimer=function(a){var c,d={};if(b._hasTimer||a){if(b._a&&(a||(b.playState>0||b.readyState===1)&&!b.paused)){b.duration=b._get_html5_duration();b.durationEstimate=b.duration;c=b._a.currentTime?b._a.currentTime*1e3:0;b._whileplaying(c,d,d,d,d);return true}else{g._wD('_onTimer: Warn for "'+b.sID+'": '+(!b._a?"Could not find element. ":"")+(b.playState===0?"playState bad, 0?":"playState = "+b.playState+", OK"));return false}}};this._get_html5_duration=function(){var a=b._a?b._a.duration*1e3:b._iO?b._iO.duration:undefined,c=a&&!isNaN(a)&&a!==Infinity?a:b._iO?b._iO.duration:null;return c};this._setup_html5=function(a){var d=D(b._iO,a),e=decodeURI,f=bx?g._global_a:b._a,h=e(d.url),i=f&&f._t?f._t.instanceOptions:null;if(f){if(f._t&&i.url===d.url&&(!b._lastURL||b._lastURL===i.url)){return f}g._wD("setting new URL on existing object: "+h+(b._lastURL?", old URL: "+b._lastURL:""));if(bx&&f._t&&f._t.playState&&d.url!==i.url){f._t.stop()}c();f.src=d.url;b.url=d.url;b._lastURL=d.url;f._called_load=false}else{g._wD("creating HTML5 Audio() element with URL: "+h);f=new Audio(d.url);f._called_load=false;if(bF){f._called_load=true}if(bx){g._global_a=f}}b.isHTML5=true;b._a=f;f._t=b;b._add_html5_events();f.loop=d.loops>1?"loop":"";if(d.autoLoad||d.autoPlay){f.autobuffer="auto";f.preload="auto";b.load();f._called_load=true}else{f.autobuffer=false;f.preload="none"}f.loop=d.loops>1?"loop":"";return f};this._add_html5_events=function(){function c(a,c,d){return b._a?b._a.addEventListener(a,c,d||false):null}if(b._a._added_events){return false}var a;g._wD(j+"adding event listeners: "+b.sID);b._a._added_events=true;for(a in bB){if(bB.hasOwnProperty(a)){c(a,bB[a])}}return true};this._remove_html5_events=function(){function c(a,c,d){return b._a?b._a.removeEventListener(a,c,d||false):null}var a;g._wD(j+"removing event listeners: "+b.sID);b._a._added_events=false;for(a in bB){if(bB.hasOwnProperty(a)){c(a,bB[a])}}};this._onload=function(a){var c="SMSound._onload(): ",d=!!a;g._wD(c+'"'+b.sID+'"'+(d?" loaded.":" failed to load? - "+b.url),d?1:2);if(!d&&!b.isHTML5){if(g.sandbox.noRemote===true){g._wD(c+_("noNet"),1)}if(g.sandbox.noLocal===true){g._wD(c+_("noLocal"),1)}}b.loaded=d;b.readyState=d?3:2;b._onbufferchange(0);if(b._iO.onload){b._iO.onload.apply(b,[d])}return true};this._onbufferchange=function(a){var c="SMSound._onbufferchange()";if(b.playState===0){return false}if(a&&b.isBuffering||!a&&!b.isBuffering){return false}b.isBuffering=a===1;if(b._iO.onbufferchange){g._wD(c+": "+a);b._iO.onbufferchange.apply(b)}return true};this._onsuspend=function(){if(b._iO.onsuspend){g._wD("SMSound._onsuspend()");b._iO.onsuspend.apply(b)}return true};this._onfailure=function(a,c,d){b.failures++;g._wD('SMSound._onfailure(): "'+b.sID+'" count '+b.failures);if(b._iO.onfailure&&b.failures===1){b._iO.onfailure(b,a,c,d)}else{g._wD("SMSound._onfailure(): ignoring")}};this._onfinish=function(){var a=b._iO.onfinish;b._onbufferchange(0);b.resetOnPosition(0);if(b.instanceCount){b.instanceCount--;if(!b.instanceCount){b.playState=0;b.paused=false;b.instanceCount=0;b.instanceOptions={};b._iO={};d()}if(!b.instanceCount||b._iO.multiShotEvents){if(a){g._wD('SMSound._onfinish(): "'+b.sID+'"');a.apply(b)}}}};this._whileloading=function(a,c,d,e){b.bytesLoaded=a;b.bytesTotal=c;b.duration=Math.floor(d);b.bufferLength=e;if(!b._iO.isMovieStar){if(b._iO.duration){b.durationEstimate=b.duration>b._iO.duration?b.duration:b._iO.duration}else{b.durationEstimate=parseInt(b.bytesTotal/b.bytesLoaded*b.duration,10)}if(b.durationEstimate===undefined){b.durationEstimate=b.duration}if(b.readyState!==3&&b._iO.whileloading){b._iO.whileloading.apply(b)}}else{b.durationEstimate=b.duration;if(b.readyState!==3&&b._iO.whileloading){b._iO.whileloading.apply(b)}}};this._whileplaying=function(a,c,d,e,f){if(isNaN(a)||a===null){return false}b.position=a;b.processOnPosition();if(!b.isHTML5&&r>8){if(b._iO.usePeakData&&typeof c!=="undefined"&&c){b.peakData={left:c.leftPeak,right:c.rightPeak}}if(b._iO.useWaveformData&&typeof d!=="undefined"&&d){b.waveformData={left:d.split(","),right:e.split(",")}}if(b._iO.useEQData){if(typeof f!=="undefined"&&f&&f.leftEQ){var g=f.leftEQ.split(",");b.eqData=g;b.eqData.left=g;if(typeof f.rightEQ!=="undefined"&&f.rightEQ){b.eqData.right=f.rightEQ.split(",")}}}}if(b.playState===1){if(!b.isHTML5&&r===8&&!b.position&&b.isBuffering){b._onbufferchange(0)}if(b._iO.whileplaying){b._iO.whileplaying.apply(b)}}return true};this._onid3=function(a,c){g._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var d=[],e,f;for(e=0,f=a.length;e<f;e++){d[a[e]]=c[e]}b.id3=D(b.id3,d);if(b._iO.onid3){b._iO.onid3.apply(b)}};this._onconnect=function(a){var c="SMSound._onconnect(): ";a=a===1;g._wD(c+'"'+b.sID+'"'+(a?" connected.":" failed to connect? - "+b.url),a?1:2);b.connected=a;if(a){b.failures=0;if(bg(b.sID)){if(b.getAutoPlay()){b.play(undefined,b.getAutoPlay())}else if(b._iO.autoLoad){b.load()}}if(b._iO.onconnect){b._iO.onconnect.apply(b,[a])}}};this._ondataerror=function(a){if(b.playState>0){g._wD("SMSound._ondataerror(): "+a);if(b._iO.ondataerror){b._iO.ondataerror.apply(b)}}}};P=function(){return o.body||o._docElement||o.getElementsByTagName("div")[0]};k=function(a){return o.getElementById(a)};D=function(a,b){var c={},d,e,f;for(d in a){if(a.hasOwnProperty(d)){c[d]=a[d]}}e=typeof b==="undefined"?g.defaultOptions:b;for(f in e){if(e.hasOwnProperty(f)&&typeof c[f]==="undefined"){c[f]=e[f]}}return c};bv=function(){function f(){d(c(arguments),"remove")}function e(){d(c(arguments),"add")}function d(c,d){var e=c.shift(),f=[b[d]];if(a){e[f](c[0],c[1])}else{e[f].apply(e,c)}}function c(b){var c=bw.call(b),d=c.length;if(a){c[1]="on"+c[1];if(d>3){c.pop()}}else if(d===3){c.push(false)}return c}var a=m.attachEvent,b={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:e,remove:f}}();bB={abort:bX(function(a){g._wD(j+"abort: "+this._t.sID)}),canplay:bX(function(a){if(this._t._html5_canplay){return true}this._t._html5_canplay=true;g._wD(j+"canplay: "+this._t.sID+", "+this._t.url);this._t._onbufferchange(0);var b=!isNaN(this._t.position)?this._t.position/1e3:null;if(this._t.position&&this.currentTime!==b){g._wD(j+"canplay: setting position to "+b);try{this.currentTime=b}catch(c){g._wD(j+"setting position failed: "+c.message,2)}}}),load:bX(function(a){if(!this._t.loaded){this._t._onbufferchange(0);this._t._whileloading(this._t.bytesTotal,this._t.bytesTotal,this._t._get_html5_duration());this._t._onload(true)}}),emptied:bX(function(a){g._wD(j+"emptied: "+this._t.sID)}),ended:bX(function(a){g._wD(j+"ended: "+this._t.sID);this._t._onfinish()}),error:bX(function(a){g._wD(j+"error: "+this.error.code);this._t._onload(false)}),loadeddata:bX(function(a){var b=this._t,c=b.bytesTotal||1;g._wD(j+"loadeddata: "+this._t.sID);if(!b._loaded&&!bI){b.duration=b._get_html5_duration();b._whileloading(c,c,b._get_html5_duration());b._onload(true)}}),loadedmetadata:bX(function(a){g._wD(j+"loadedmetadata: "+this._t.sID)}),loadstart:bX(function(a){g._wD(j+"loadstart: "+this._t.sID);this._t._onbufferchange(1)}),play:bX(function(a){g._wD(j+"play: "+this._t.sID+", "+this._t.url);this._t._onbufferchange(0)}),playing:bX(function(a){g._wD(j+"playing: "+this._t.sID+", "+this._t.url);this._t._onbufferchange(0)}),progress:bX(function(a){if(this._t.loaded){return false}var b,c,d,e=0,f=a.type==="progress",h=a.target.buffered,i=a.loaded||0,k=a.total||1;if(h&&h.length){for(b=h.length;b--;){e=h.end(b)-h.start(b)}i=e/a.target.duration;if(f&&h.length>1){d=[];c=h.length;for(b=0;b<c;b++){d.push(a.target.buffered.start(b)+"-"+a.target.buffered.end(b))}g._wD(j+"progress: timeRanges: "+d.join(", "))}if(f&&!isNaN(i)){g._wD(j+"progress: "+this._t.sID+": "+Math.floor(i*100)+"% loaded")}}if(!isNaN(i)){this._t._onbufferchange(0);this._t._whileloading(i,k,this._t._get_html5_duration());if(i&&k&&i===k){bB.load.call(this,a)}}}),ratechange:bX(function(a){g._wD(j+"ratechange: "+this._t.sID)}),suspend:bX(function(a){g._wD(j+"suspend: "+this._t.sID);bB.progress.call(this,a);this._t._onsuspend()}),stalled:bX(function(a){g._wD(j+"stalled: "+this._t.sID)}),timeupdate:bX(function(a){this._t._onTimer()}),waiting:bX(function(a){g._wD(j+"waiting: "+this._t.sID);this._t._onbufferchange(1)})};bp=function(a){return!a.serverURL&&(a.type?bq({type:a.type}):bq({url:a.url})||g.html5Only)};bs=function(a){if(a){a.src=bE?"":bR}};bq=function(a){function j(a){return g.preferFlash&&by&&!g.ignoreFlash&&typeof g.flash[a]!=="undefined"&&g.flash[a]}if(!g.useHTML5Audio||!g.hasHTML5){return false}var b=a.url||null,c=a.type||null,d=g.audioFormats,e,f,h,i;if(c&&g.html5[c]!=="undefined"){return g.html5[c]&&!j(c)}if(!br){br=[];for(i in d){if(d.hasOwnProperty(i)){br.push(i);if(d[i].related){br=br.concat(d[i].related)}}}br=new RegExp("\\.("+br.join("|")+")(\\?.*)?$","i")}h=b?b.toLowerCase().match(br):null;if(!h||!h.length){if(!c){return false}else{f=c.indexOf(";");h=(f!==-1?c.substr(0,f):c).substr(6)}}else{h=h[1]}if(h&&typeof g.html5[h]!=="undefined"){return g.html5[h]&&!j(h)}else{c="audio/"+h;e=g.html5.canPlayType({type:c});g.html5[h]=e;return e&&g.html5[c]&&!j(c)}};bu=function(){function f(b){var c,d,e,f=false;if(!a||typeof a.canPlayType!=="function"){return false}if(b instanceof Array){for(d=0,e=b.length;d<e&&!f;d++){if(g.html5[b[d]]||a.canPlayType(b[d]).match(g.html5Test)){f=true;g.html5[b[d]]=true;g.flash[b[d]]=!!(g.preferFlash&&by&&b[d].match(bQ))}}return f}else{c=a&&typeof a.canPlayType==="function"?a.canPlayType(b):false;return!!(c&&c.match(g.html5Test))}}if(!g.useHTML5Audio||typeof Audio==="undefined"){return false}var a=typeof Audio!=="undefined"?bJ?new Audio(null):new Audio:null,b,c={},d,e;d=g.audioFormats;for(b in d){if(d.hasOwnProperty(b)){c[b]=f(d[b].type);c["audio/"+b]=c[b];if(g.preferFlash&&!g.ignoreFlash&&b.match(bQ)){g.flash[b]=true}else{g.flash[b]=false}if(d[b]&&d[b].related){for(e=d[b].related.length;e--;){c["audio/"+d[b].related[e]]=c[b];g.html5[d[b].related[e]]=c[b];g.flash[d[b].related[e]]=c[b]}}}}c.canPlayType=a?f:null;g.html5=D(g.html5,c);return true};L={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:i+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:i+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:h+": Verify that %s is a valid path.",tryDebug:"Try "+h+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:h+": Non-HTTP page ("+o.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:h+": Special case: Waiting for focus-related event..",waitImpatient:h+": Getting impatient, still waiting for Flash%s...",waitForever:h+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:h+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+h+"._debug(): Current sound objects ---",waitEI:i+"initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:h+": Waiting for window.onload()",docLoaded:h+": Document already loaded",onload:i+"initComplete(): calling soundManager.onload()",onloadOK:h+".onload() complete",init:i+"init()",didInit:i+"init(): Already called?",flashJS:h+": Attempting to call Flash from JS..",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:h+".disable(): Shutting down",queue:h+": Queueing %s handler",smFail:h+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+g.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:i+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:h+".load(): current URL already assigned.",badFV:h+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"};_=function(){var a=bw.call(arguments),b=a.shift(),c=L&&L[b]?L[b]:"",d,e;if(c&&a&&a.length){for(d=0,e=a.length;d<e;d++){c=c.replace("%s",a[d])}}return c};bd=function(a){if(r===8&&a.loops>1&&a.stream){A("as2loop");a.stream=false}return a};be=function(a,b){if(a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.us)}};this._debug();this.load=function(a){var c=null;if(typeof a!==this.currentTime!==b){g._wD(j+eWaveformData||a.useEQData)){g._wD((b||"")+_("policy"));a.usePolicyFile=true}return a};bf=function(a){if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){console.warn(a)}else{g._wD(a)}};p=function(){return false};W=function(a){var b;for(b in a){if(a.hasOwnProperty(b)&&typeof a[b]==="function"){a[b]=p}}b=null};X=function(a){if(typeof a==="undefined"){a=false}if(y||a){A("smFail",2);g.disable(a)}};Y=function(a){var b=null,c;if(a){if(a.match(/\.swf(\?.*)?$/i)){b=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4);if(b){return a}}else if(a.lastIndexOf("/")!==a.length-1){a+="/"}}c=(a&&a.lastIndexOf("/")!==-1?a.substr(0,a.lastIndexOf("/")+1):"./")+g.movieURL;if(g.noSWFCache){c+="?ts="+(new Date).getTime()}return c};J=function(){r=parseInt(g.flashVersion,10);if(r!==8&&r!==9){g._wD(_("badFV",r,V));g.flashVersion=r=V}var a=g.debugMode||g.debugFlash?"_debug.swf":".swf";if(g.useHTML5Audio&&!g.html5Only&&g.audioFormats.mp4.required&&r<9){g._wD(_("needfl9"));g.flashVersion=r=9}g.version=g.versionNumber+(g.html5Only?" (HTML5-only mode)":r===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(r>8){g.defaultOptions=D(g.defaultOptions,g.flash9Options);g.features.buffering=true;g.defaultOptions=D(g.defaultOptions,g.movieStarOptions);g.filePatterns.flash9=new RegExp("\\.(mp3|"+bV.join("|")+")(\\?.*)?$","i");g.features.movieStar=true}else{g.features.movieStar=false}g.filePattern=g.filePatterns[r!==8?"flash9":"flash8"];g.movieURL=(r===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a);g.features.peakData=g.features.waveformData=g.features.eqData=r>8};S=function(a,b){if(!g.o){return false}g.o._setPolling(a,b)};T=function(){if(g.debugURLParam.test(n)){g.debugMode=true}if(k(g.debugID)){return false}var a,b,c,d,e;if(g.debugMode&&!k(g.debugID)&&(!bM||!g.useConsole||g.useConsole&&bM&&!g.consoleOnly)){a=o.createElement("div");a.id=g.debugID+"-toggle";d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};a.appendChild(o.createTextNode("-"));a.onclick=bc;a.title="Toggle SM2 debug console";if(l.match(/msie 6/i)){a.style.position="absolute";a.style.cursor="hand"}for(e in d){if(d.hasOwnProperty(e)){a.style[e]=d[e]}}b=o.createElement("div");b.id=g.debugID;b.style.display=g.debugMode?"block":"none";if(g.debugMode&&!k(a.id)){try{c=P();c.appendChild(a)}catch(f){throw new Error(_("domError")+" \n"+f.toString())}c.appendChild(b)}}c=null};bg=this.getSoundById;A=function(a,b){if(!a){return""}else{return g._wD(_(a),b)}};if(n.indexOf("sm2-debug=alert")+1&&g.debugMode){g._wD=function(b){a.alert(b)}}bc=function(){var a=k(g.debugID),b=k(g.debugID+"-toggle");if(!a){return false}if(t){b.innerHTML="+";a.style.display="none"}else{b.innerHTML="-";a.style.display="block"}t=!t};u=function(a,b,c){if(typeof sm2Debugger!=="undefined"){try{sm2Debugger.handleEvent(a,b,c)}catch(d){}}return true};bb=function(){var a=[];if(g.debugMode){a.push(g.swfCSS.sm2Debug)}if(g.debugFlash){a.push(g.swfCSS.flashDebug)}if(g.useHighPerformance){a.push(g.swfCSS.highPerf)}return a.join(" ")};ba=function(){var a=_("fbHandler"),b=g.getMoviePercent(),c=g.swfCSS,d={type:"FLASHBLOCK"};if(g.html5Only){return false}if(!g.ok()){if(bn){g.oMC.className=bb()+" "+c.swfDefault+" "+(b===null?c.swfTimedout:c.swfError);g._wD(a+": "+_("fbTimeout")+(b?" ("+_("fbLoaded")+")":""))}g.didFlashBlock=true;F({type:"ontimeout",ignoreInit:true,error:d});R(d)}else{if(g.didFlashBlock){g._wD(a+": Unblocked")}if(g.oMC){g.oMC.className=[bb(),c.swfDefault,c.swfLoaded+(g.didFlashBlock?" "+c.swfUnblocked:"")].join(" ")}}};E=function(a,b,c){if(typeof s[a]==="undefined"){s[a]=[]}s[a].push({method:b,scope:c||null,fired:false})};F=function(a){if(!a){a={type:"onready"}}if(!x&&a&&!a.ignoreInit){return false}if(a.type==="ontimeout"&&g.ok()){return false}var b={success:a&&a.ignoreInit?g.ok():!y},c=a&&a.type?s[a.type]||[]:[],d=[],e,f,i=[b],j=bn&&g.useFlashBlock&&!g.ok();if(a.error){i[0].error=a.error}for(e=0,f=c.length;e<f;e++){if(c[e].fired!==true){d.push(c[e])}}if(d.length){g._wD(h+": Firing "+d.length+" "+a.type+"() item"+(d.length===1?"":"s"));for(e=0,f=d.length;e<f;e++){if(d[e].scope){d[e].method.apply(d[e].scope,i)}else{d[e].method.apply(this,i)}if(!j){d[e].fired=true}}}return true};G=function(){m.setTimeout(function(){if(g.useFlashBlock){ba()}F();if(g.onload instanceof Function){A("onload",1);g.onload.apply(m);A("onloadOK",1)}if(g.waitForWindowLoad){bv.add(m,"load",G)}},1)};bz=function(){if(by!==undefined){return by}var a=false,b=navigator,c=b.plugins,d,e,f,g=m.ActiveXObject;if(c&&c.length){e="application/x-shockwave-flash";f=b.mimeTypes;if(f&&f[e]&&f[e].enabledPlugin&&f[e].enabledPlugin.description){a=true}}else if(typeof g!=="undefined"){try{d=new g("ShockwaveFlash.ShockwaveFlash")}catch(h){}a=!!d}by=a;return a};bo=function(){var a,b,c=bD&&!!l.match(/os (1|2|3_0|3_1)/i);if(c){g.hasHTML5=false;g.html5Only=true;if(g.oMC){g.oMC.style.display="none"}return false}if(g.useHTML5Audio){if(!g.html5||!g.html5.canPlayType){g._wD("SoundManager: No HTML5 Audio() support detected.");g.hasHTML5=false;return true}else{g.hasHTML5=true}if(bL){g._wD(i+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!by?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1);if(bz()){return true}}}else{return true}for(b in g.audioFormats){if(g.audioFormats.hasOwnProperty(b)){if(g.audioFormats[b].required&&!g.html5.canPlayType(g.audioFormats[b].type)||g.flash[b]||g.flash[g.audioFormats[b].type]){a=true}}}if(g.ignoreFlash){a=false}g.html5Only=g.hasHTML5&&g.useHTML5Audio&&!a;return!g.html5Only};bl=function(a){if(!a._hasTimer){a._hasTimer=true}};bm=function(a){if(a._hasTimer){a._hasTimer=false}};R=function(a){a=typeof a!=="undefined"?a:{};if(g.onerror instanceof Function){g.onerror.apply(m,[{type:typeof a.type!=="undefined"?a.type:null}])}if(typeof a.fatal!=="undefined"&&a.fatal){g.disable()}};bA=function(){if(!bL||!bz()){return false}var a=g.audioFormats,b,c;for(c in a){if(a.hasOwnProperty(c)){if(c==="mp3"||c==="mp4"){g._wD(h+": Using flash fallback for "+c+" format");g.html5[c]=false;if(a[c]&&a[c].related){for(b=a[c].related.length;b--;){g.html5[a[c].related[b]]=false}}}}}};this._setSandboxType=function(a){var b=g.sandbox;b.type=a;b.description=b.types[typeof b.types[a]!=="undefined"?a:"unknown"];g._wD("Flash security sandbox type: "+b.type);if(b.type==="localWithFile"){b.noRemote=true;b.noLocal=false;A("secNote",2)}else if(b.type==="localWithNetwork"){b.noRemote=false;b.noLocal=true}else if(b.type==="localTrusted"){b.noRemote=false;b.noLocal=false}};this._externalInterfaceOK=function(a){if(g.swfLoaded){return false}var b=(new Date).getTime();g._wD(i+"externalInterfaceOK()"+(a?" (~"+(b-a)+" ms)":""));u("swf",true);u("flashtojs",true);g.swfLoaded=true;bO=false;if(bL){bA()}if(bG){setTimeout(q,100)}else{q()}};Q=function(a,b){function C(a,b){return'<param name="'+a+'" value="'+b+'" />'}function c(){g._wD("-- SoundManager 2 "+g.version+(!g.html5Only&&g.useHTML5Audio?g.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(!g.html5Only?(g.useHighPerformance?", high performance mode, ":", ")+((g.flashPollingInterval?"custom ("+g.flashPollingInterval+"ms)":"normal")+" polling")+(g.wmode?", wmode: "+g.wmode:"")+(g.debugFlash?", flash debug mode":"")+(g.useFlashBlock?", flashBlock mode":""):"")+" --",1)}if(v&&w){return false}if(g.html5Only){J();c();g.oMC=k(g.movieID);q();v=true;w=true;return false}var d=b||g.url,e=g.altURL||d,f="JS/Flash audio component (SoundManager 2)",h,j,m=P(),n,p,r,s=bb(),t,u,x,y="auto",z=null,B=o.getElementsByTagName("html")[0];z=B&&B.dir&&B.dir.match(/rtl/i);a=typeof a==="undefined"?g.id:a;J();g.url=Y(bS?d:e);b=g.url;g.wmode=!g.wmode&&g.useHighPerformance?"transparent":g.wmode;if(g.wmode!==null&&(l.match(/msie 8/i)||!bG&&!g.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){g.specialWmodeCase=true;A("spcWmode");g.wmode=null}h={name:a,id:a,src:b,width:y,height:y,quality:"high",allowScriptAccess:g.allowScriptAccess,bgcolor:g.bgColor,pluginspage:bT+"www.macromedia.com/go/getflashplayer",title:f,type:"application/x-shockwave-flash",wmode:g.wmode,hasPriority:"true"};if(g.debugFlash){h.FlashVars="debug=1"}if(!g.wmode){delete h.wmode}if(bG){j=o.createElement("div");p=['<object id="'+a+'" data="'+b+'" type="'+h.type+'" title="'+h.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+bT+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+h.width+'" height="'+h.height+'">',C("movie",b),C("AllowScriptAccess",g.allowScriptAccess),C("quality",h.quality),g.wmode?C("wmode",g.wmode):"",C("bgcolor",g.bgColor),C("hasPriority","true"),g.debugFlash?C("FlashVars",h.FlashVars):"","</object>"].join("")}else{j=o.createElement("embed");for(n in h){if(h.hasOwnProperty(n)){j.setAttribute(n,h[n])}}}T();s=bb();m=P();if(m){g.oMC=k(g.movieID)||o.createElement("div");if(!g.oMC.id){g.oMC.id=g.movieID;g.oMC.className=g.swfCSS.swfDefault+" "+s;t=null;r=null;if(!g.useFlashBlock){if(g.useHighPerformance){t={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{t={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(z){t.left=Math.abs(parseInt(t.left,10))+"px"}}}if(bH){g.oMC.style.zIndex=1e4}if(!g.debugFlash){for(u in t){if(t.hasOwnProperty(u)){g.oMC.style[u]=t[u]}}}try{if(!bG){g.oMC.appendChild(j)}m.appendChild(g.oMC);if(bG){r=g.oMC.appendChild(o.createElement("div"));r.className=g.swfCSS.swfBox;r.innerHTML=p}w=true}catch(D){throw new Error(_("domError")+" \n"+D.toString())}}else{x=g.oMC.className;g.oMC.className=(x?x+" ":g.swfCSS.swfDefault)+(s?" "+s:"");g.oMC.appendChild(j);if(bG){r=g.oMC.appendChild(o.createElement("div"));r.className=g.swfCSS.swfBox;r.innerHTML=p}w=true}}v=true;c();g._wD(i+"createMovie(): Trying to load "+b+(!bS&&g.altURL?" (alternate URL)":""),1);return true};M=function(){if(g.html5Only){Q();return false}if(g.o){return false}g.o=g.getMovie(g.id);if(!g.o){if(!Z){Q(g.id,g.url)}else{if(!bG){g.oMC.appendChild(Z)}else{g.oMC.innerHTML=$}Z=null;v=true}g.o=g.getMovie(g.id)}if(g.o){A("waitEI")}if(g.oninitmovie instanceof Function){setTimeout(g.oninitmovie,1)}return true};H=function(){setTimeout(I,1e3)};I=function(){if(bh){return false}bh=true;bv.remove(m,"load",H);if(bO&&!bN){A("waitFocus");return false}var a;if(!x){a=g.getMoviePercent();g._wD(_("waitImpatient",a===100?" (SWF loaded)":a>0?" (SWF "+a+"% loaded)":""))}setTimeout(function(){a=g.getMoviePercent();if(!x){g._wD(h+": No Flash response within expected time.\nLikely causes: "+(a===0?"Loading "+g.movieURL+" may have failed (and/or Flash "+r+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(g.debugFlash?" "+_("checkSWF"):""),2);if(!bS&&a){A("localFail",2);if(!g.debugFlash){A("tryDebug",2)}}if(a===0){g._wD(_("swf404",g.url))}u("flashtojs",false,": Timed out"+bS?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!x&&bP){if(a===null){if(g.useFlashBlock||g.flashLoadTimeout===0){if(g.useFlashBlock){ba()}A("waitForever")}else{X(true)}}else{if(g.flashLoadTimeout===0){A("waitForever")}else{X(true)}}}},g.flashLoadTimeout)};K=function(){function a(){bv.remove(m,"focus",K);bv.remove(m,"load",K)}if(bN||!bO){a();return true}bP=true;bN=true;g._wD(i+"handleFocus()");if(bI&&bO){bv.remove(m,"mousemove",K)}bh=false;a();return true};bC=function(){var a,b=[];if(g.useHTML5Audio&&g.hasHTML5){for(a in g.audioFormats){if(g.audioFormats.hasOwnProperty(a)){b.push(a+": "+g.html5[a]+(!g.html5[a]&&by&&g.flash[a]?" (using flash)":g.preferFlash&&g.flash[a]&&by?" (preferring flash)":!g.html5[a]?" ("+(g.audioFormats[a].required?"required, ":"")+"and no flash support)":""))}}g._wD("-- SoundManager 2: HTML5 support tests ("+g.html5Test+"): "+b.join(", ")+" --",1)}};C=function(a){if(x){return false}if(g.html5Only){g._wD("-- SoundManager 2: loaded --");x=true;G();u("onload",true);return true}var b=g.useFlashBlock&&g.flashLoadTimeout&&!g.getMoviePercent(),c;if(!b){x=true;if(y){c={type:!by&&bn?"NO_FLASH":"INIT_TIMEOUT"}}}g._wD("-- SoundManager 2 "+(y?"failed to load":"loaded")+" ("+(y?"security/load error":"OK")+") --",1);if(y||a){if(g.useFlashBlock&&g.oMC){g.oMC.className=bb()+" "+(g.getMoviePercent()===null?g.swfCSS.swfTimedout:g.swfCSS.swfError)}F({type:"ontimeout",error:c});u("onload",false);R(c);return false}else{u("onload",true)}if(g.waitForWindowLoad&&!z){A("waitOnload");bv.add(m,"load",G);return false}else{if(g.waitForWindowLoad&&z){A("docLoaded")}G()}return true};q=function(){function a(){bv.remove(m,"load",g.beginDelayedInit)}A("init");if(x){A("didInit");return false}if(g.html5Only){if(!x){a();g.enabled=true;C()}return true}M();try{A("flashJS");g.o._externalInterfaceTest(false);S(true,g.flashPollingInterval||(g.useHighPerformance?10:50));if(!g.debugMode){g.o._disableDebug()}g.enabled=true;u("jstoflash",true);if(!g.html5Only){bv.add(m,"unload",p)}}catch(b){g._wD("js/flash exception: "+b.toString());u("jstoflash",false);R({type:"JS_TO_FLASH_EXCEPTION",fatal:true});X(true);C();return false}C();a();return true};N=function(){if(O){return false}O=true;T();(function(){var a="sm2-usehtml5audio=",b=n.toLowerCase(),c=null,d="sm2-preferflash=",e=null,f=typeof console!=="undefined"&&typeof console.log!=="undefined";if(b.indexOf(a)!==-1){c=b.charAt(b.indexOf(a)+a.length)==="1";if(f){console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}g.useHTML5Audio=c}if(b.indexOf(d)!==-1){e=b.charAt(b.indexOf(d)+d.length)==="1";if(f){console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}g.preferFlash=e}})();if(!by&&g.hasHTML5){g._wD("SoundManager: No Flash detected"+(!g.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."));g.useHTML5Audio=true;g.preferFlash=false}bu();g.html5.usingFlash=bo();bn=g.html5.usingFlash;bC();if(!by&&bn){g._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available.");g.flashLoadTimeout=1}if(o.removeEventListener){o.removeEventListener("DOMContentLoaded",N,false)}M();return true};bt=function(){if(o.readyState==="complete"){N();o.detachEvent("onreadystatechange",bt)}return true};bz();bv.add(m,"focus",K);bv.add(m,"load",K);bv.add(m,"load",H);if(bI&&bO){bv.add(m,"mousemove",K)}if(o.addEventListener){o.addEventListener("DOMContentLoaded",N,false)}else if(o.attachEvent){o.attachEvent("onreadystatechange",bt)}else{u("onload",false);R({type:"NO_DOM2_EVENTS",fatal:true})}if(o.readyState==="complete"){setTimeout(N,100)}}var b=function(a,b,c){if(a.indexOf){return a.indexOf.call(a,b,c)}for(var d=c||0;d<a.length;d++){if(a[d]==b){return d}}return-1};var c=function(a,c,d,e){var f=a||{};for(var g in c){if(!e||b(e,g)>-1){if(!d||b(d,g)==-1){f[g]=c[g]}}}return f};var d=null;if(typeof SM2_DEFER=="undefined"||!SM2_DEFER){}a.SoundManager=e;a.soundManager=d})(window)