<html>
<head>
	<title>jsonp loader</title>
	<meta http-equiv="Cache-Control" content="max-age=3600"/>
	<script type="text/javascript">
		var get_url_parameters = function (str){
			var url_vars = str.replace(/^\?/,'').split('&');
			var full_url = {};
			for (var i=0; i < url_vars.length; i++) {
				var _h = url_vars[i].split('=');
				if (_h[0]){
					full_url[_h[0]] = _h[1];
				}
				
			}
			return full_url;
		};
		var soft_p = get_url_parameters(location.hash.replace('#', ''));


		window[soft_p.callback_func] = function(r){
			top.postMessage(JSON.stringify({
				data: r,
				callback_id: soft_p.callback_id
			}), "*")
		};

		
		var script = document.createElement("script");
		script.onerror = function(){
			top.postMessage(JSON.stringify({
				callback_id: soft_p.callback_id,
				error: true
			}), "*");
		};

		script.src = decodeURIComponent(soft_p.url);
		document.documentElement.firstChild.appendChild(script);



		//top.postMessage()

	</script>
</head>
<body>

</body>
</html>